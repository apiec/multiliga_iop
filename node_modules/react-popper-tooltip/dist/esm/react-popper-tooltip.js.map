{"version":3,"file":"react-popper-tooltip.js","sources":["../../src/utils.ts","../../src/usePopperTooltip.ts"],"sourcesContent":["import * as React from 'react';\n\n// kudos to @tannerlinsley https://twitter.com/tannerlinsley\nexport function useGetLatest<T>(val: T) {\n  const ref = React.useRef<T>(val);\n  ref.current = val;\n  return React.useCallback(() => ref.current, []);\n}\n\nconst noop = () => {\n  // do nothing\n};\n\nexport function useControlledState<T>({\n  initial,\n  value,\n  onChange = noop,\n}: {\n  initial?: T;\n  value?: T;\n  onChange?: (state: T) => void;\n}): [T, (state: T) => void] {\n  if (initial === undefined && value === undefined) {\n    throw new TypeError(\n      'Either \"value\" or \"initial\" variable must be set. Now both are undefined'\n    );\n  }\n\n  const [state, setState] = React.useState(initial);\n\n  const getLatest = useGetLatest(state);\n\n  const set = React.useCallback(\n    (updater: T) => {\n      const state = getLatest();\n\n      const updatedState =\n        typeof updater === 'function' ? updater(state) : updater;\n\n      if (typeof updatedState.persist === 'function') updatedState.persist();\n\n      setState(updatedState);\n      if (typeof onChange === 'function') onChange(updatedState);\n    },\n    [getLatest, onChange]\n  );\n\n  const isControlled = value !== undefined;\n\n  return [isControlled ? value! : state!, isControlled ? onChange : set];\n}\n\nexport function generateBoundingClientRect(x = 0, y = 0) {\n  return () => ({\n    width: 0,\n    height: 0,\n    top: y,\n    right: x,\n    bottom: y,\n    left: x,\n  });\n}\n","import * as React from 'react';\nimport { usePopper } from 'react-popper';\nimport {\n  useControlledState,\n  useGetLatest,\n  generateBoundingClientRect,\n} from './utils';\nimport { Config, PopperOptions, PropsGetterArgs, TriggerType } from './types';\n\nconst virtualElement = {\n  getBoundingClientRect: generateBoundingClientRect(),\n};\n\nconst defaultConfig: Config = {\n  closeOnOutsideClick: true,\n  closeOnTriggerHidden: false,\n  defaultVisible: false,\n  delayHide: 0,\n  delayShow: 0,\n  followCursor: false,\n  interactive: false,\n  mutationObserverOptions: {\n    attributes: true,\n    childList: true,\n    subtree: true,\n  },\n  offset: [0, 7],\n  trigger: 'hover',\n};\n\nexport function usePopperTooltip(\n  config: Config = {},\n  popperOptions: PopperOptions = {}\n) {\n  // Merging options with default options.\n  // Keys with undefined values are replaced with the default ones if any.\n  // Keys with other values pass through.\n  const finalConfig = (Object.keys(defaultConfig) as Array<\n    keyof typeof defaultConfig\n  >).reduce(\n    (config, key) => ({\n      ...config,\n      [key]: config[key] !== undefined ? config[key] : defaultConfig[key],\n    }),\n    config\n  );\n\n  const defaultModifiers = React.useMemo(\n    () => [{ name: 'offset', options: { offset: finalConfig.offset } }],\n    [finalConfig.offset]\n  );\n\n  const finalPopperOptions = {\n    ...popperOptions,\n    placement: popperOptions.placement || finalConfig.placement,\n    modifiers: popperOptions.modifiers || defaultModifiers,\n  };\n\n  const [triggerRef, setTriggerRef] = React.useState<HTMLElement | null>(null);\n  const [tooltipRef, setTooltipRef] = React.useState<HTMLElement | null>(null);\n  const [visible, setVisible] = useControlledState({\n    initial: finalConfig.defaultVisible,\n    value: finalConfig.visible,\n    onChange: finalConfig.onVisibleChange,\n  });\n\n  const timer = React.useRef<number>();\n\n  const { styles, attributes, ...popperProps } = usePopper(\n    finalConfig.followCursor ? virtualElement : triggerRef,\n    tooltipRef,\n    finalPopperOptions\n  );\n\n  const update = popperProps.update;\n\n  const getLatest = useGetLatest({\n    visible,\n    triggerRef,\n    tooltipRef,\n    finalConfig,\n  });\n\n  const isTriggeredBy = React.useCallback(\n    (trigger: TriggerType) => {\n      return Array.isArray(finalConfig.trigger)\n        ? finalConfig.trigger.includes(trigger)\n        : finalConfig.trigger === trigger;\n    },\n    [finalConfig.trigger]\n  );\n\n  const hideTooltip = React.useCallback(() => {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(\n      () => setVisible(false),\n      finalConfig.delayHide\n    );\n  }, [finalConfig.delayHide, setVisible]);\n\n  const showTooltip = React.useCallback(() => {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(\n      () => setVisible(true),\n      finalConfig.delayShow\n    );\n  }, [finalConfig.delayShow, setVisible]);\n\n  const toggleTooltip = React.useCallback(() => {\n    if (getLatest().visible) {\n      hideTooltip();\n    } else {\n      showTooltip();\n    }\n  }, [getLatest, hideTooltip, showTooltip]);\n\n  React.useEffect(() => clearTimeout(timer.current), []);\n\n  // Handle click outside\n  React.useEffect(() => {\n    if (!getLatest().finalConfig.closeOnOutsideClick) return;\n\n    const handleClickOutside: EventListener = (event) => {\n      const { tooltipRef, triggerRef } = getLatest();\n      const target = event.target;\n      if (target instanceof Node) {\n        if (\n          tooltipRef != null &&\n          triggerRef != null &&\n          !tooltipRef.contains(target) &&\n          !triggerRef.contains(target)\n        ) {\n          hideTooltip();\n        }\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [getLatest, hideTooltip]);\n\n  // Trigger: click\n  React.useEffect(() => {\n    if (triggerRef == null || !isTriggeredBy('click')) return;\n\n    triggerRef.addEventListener('click', toggleTooltip);\n\n    return () => triggerRef.removeEventListener('click', toggleTooltip);\n  }, [triggerRef, isTriggeredBy, toggleTooltip]);\n\n  // Trigger: right-click\n  React.useEffect(() => {\n    if (triggerRef == null || !isTriggeredBy('right-click')) return;\n\n    const preventDefaultAndToggle: EventListener = (event) => {\n      // Don't show the context menu\n      event.preventDefault();\n      toggleTooltip();\n    };\n\n    triggerRef.addEventListener('contextmenu', preventDefaultAndToggle);\n    return () =>\n      triggerRef.removeEventListener('contextmenu', preventDefaultAndToggle);\n  }, [triggerRef, isTriggeredBy, toggleTooltip]);\n\n  // Trigger: focus\n  React.useEffect(() => {\n    if (triggerRef == null || !isTriggeredBy('focus')) return;\n\n    triggerRef.addEventListener('focus', showTooltip);\n    triggerRef.addEventListener('blur', hideTooltip);\n    return () => {\n      triggerRef.removeEventListener('focus', showTooltip);\n      triggerRef.removeEventListener('blur', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]);\n\n  // Trigger: hover on trigger\n  React.useEffect(() => {\n    if (triggerRef == null || !isTriggeredBy('hover')) return;\n\n    triggerRef.addEventListener('mouseenter', showTooltip);\n    triggerRef.addEventListener('mouseleave', hideTooltip);\n    return () => {\n      triggerRef.removeEventListener('mouseenter', showTooltip);\n      triggerRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]);\n\n  // Trigger: hover on tooltip, keep it open if hovered\n  React.useEffect(() => {\n    if (tooltipRef == null || !getLatest().finalConfig.interactive) return;\n\n    tooltipRef.addEventListener('mouseenter', showTooltip);\n    tooltipRef.addEventListener('mouseleave', hideTooltip);\n    return () => {\n      tooltipRef.removeEventListener('mouseenter', showTooltip);\n      tooltipRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [tooltipRef, showTooltip, hideTooltip, getLatest]);\n\n  // Handle closing tooltip if trigger hidden\n  const isReferenceHidden =\n    popperProps?.state?.modifiersData?.hide?.isReferenceHidden;\n  React.useEffect(() => {\n    if (finalConfig.closeOnTriggerHidden && isReferenceHidden) hideTooltip();\n  }, [finalConfig.closeOnTriggerHidden, hideTooltip, isReferenceHidden]);\n\n  // Handle follow cursor\n  React.useEffect(() => {\n    if (!finalConfig.followCursor || triggerRef == null) return;\n\n    function setMousePosition({\n      clientX,\n      clientY,\n    }: {\n      clientX: number;\n      clientY: number;\n    }) {\n      virtualElement.getBoundingClientRect = generateBoundingClientRect(\n        clientX,\n        clientY\n      );\n      update?.();\n    }\n\n    triggerRef.addEventListener('mousemove', setMousePosition);\n    return () => triggerRef.removeEventListener('mousemove', setMousePosition);\n  }, [finalConfig.followCursor, triggerRef, update]);\n\n  // Handle tooltip DOM mutation changes (aka mutation observer)\n  React.useEffect(() => {\n    if (\n      tooltipRef == null ||\n      update == null ||\n      finalConfig.mutationObserverOptions == null\n    )\n      return;\n\n    const observer = new MutationObserver(update);\n    observer.observe(tooltipRef, finalConfig.mutationObserverOptions);\n    return () => observer.disconnect();\n  }, [finalConfig.mutationObserverOptions, tooltipRef, update]);\n\n  // Tooltip props getter\n  const getTooltipProps = (args: PropsGetterArgs = {}) => {\n    return {\n      ...args,\n      style: {\n        ...args.style,\n        ...styles.popper,\n        ...(finalConfig.followCursor && {\n          pointerEvents: 'none' as React.CSSProperties['pointerEvents'],\n        }),\n      },\n      ...attributes.popper,\n    };\n  };\n\n  // Arrow props getter\n  const getArrowProps = (args: PropsGetterArgs = {}) => {\n    return {\n      ...args,\n      ...attributes.arrow,\n      style: {\n        ...args.style,\n        ...styles.arrow,\n      },\n      'data-popper-arrow': true,\n    };\n  };\n\n  return {\n    getArrowProps,\n    getTooltipProps,\n    setTooltipRef,\n    setTriggerRef,\n    tooltipRef,\n    triggerRef,\n    visible,\n    ...popperProps,\n  };\n}\n"],"names":["useGetLatest","val","ref","React","current","noop","useControlledState","initial","value","onChange","undefined","TypeError","state","setState","getLatest","set","updater","updatedState","persist","isControlled","generateBoundingClientRect","x","y","width","height","top","right","bottom","left","virtualElement","getBoundingClientRect","defaultConfig","closeOnOutsideClick","closeOnTriggerHidden","defaultVisible","delayHide","delayShow","followCursor","interactive","mutationObserverOptions","attributes","childList","subtree","offset","trigger","usePopperTooltip","config","popperOptions","finalConfig","Object","keys","reduce","key","defaultModifiers","name","options","finalPopperOptions","placement","modifiers","triggerRef","setTriggerRef","tooltipRef","setTooltipRef","visible","onVisibleChange","setVisible","timer","usePopper","styles","popperProps","update","isTriggeredBy","Array","isArray","includes","hideTooltip","clearTimeout","window","setTimeout","showTooltip","toggleTooltip","handleClickOutside","event","target","Node","contains","document","addEventListener","removeEventListener","preventDefaultAndToggle","preventDefault","isReferenceHidden","modifiersData","hide","setMousePosition","clientX","clientY","observer","MutationObserver","observe","disconnect","getTooltipProps","args","style","popper","pointerEvents","getArrowProps","arrow"],"mappings":"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"}